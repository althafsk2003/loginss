@model WebApplication4.Models.ClubDashboardViewModel
@{
    ViewBag.Title = "Club Management";
    Layout = "~/Views/Shared/DirectorLayout.cshtml";
}

<style>
    .table-responsive {
        max-height: 350px;
        overflow-y: auto;
    }

    .table thead th {
        position: sticky;
        top: 0;
        background-color: #004085;
        color: white;
        z-index: 2;
    }

    .table tbody tr:nth-child(odd) {
        background-color: #f9f9f9;
    }

    .table tbody tr:hover {
        background-color: #e2e6ea;
    }

    .btn-group .btn {
        margin-right: 5px;
    }

    .badge {
        font-size: 0.9rem;
    }

    .card {
        border-radius: 8px;
        overflow: hidden;
        border: 1px solid #ddd;
    }
</style>

<div class="container mt-4">

    <div class="d-flex mb-3 align-items-center">
        <h3 class="me-auto">View Clubs</h3>
        <div class="btn-group">
            <a href="@Url.Action("ViewClubs", new { filter = "all" })" class="btn btn-secondary me-2 shadow-sm">
                All Clubs <span class="badge bg-light text-dark">@Model.TotalCount</span>
            </a>
            <a href="@Url.Action("ViewClubs", new { filter = "active" })" class="btn btn-success me-2 shadow-sm">
                Active <span class="badge bg-light text-dark">@Model.ActiveCount</span>
            </a>
            <a href="@Url.Action("ViewClubs", new { filter = "inactive" })" class="btn btn-danger shadow-sm">
                Inactive <span class="badge bg-light text-dark">@Model.InactiveCount</span>
            </a>
        </div>
    </div>


    <!-- Table -->
    <div class="card shadow-sm">
        <div class="card-body p-0">
            <div class="table-responsive">
                <table class="table table-bordered table-hover m-0">
                    <thead>
                        <tr>
                            <th>Club Name</th>
                            <th>Department</th>
                            <th>Sub Department</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var club in Model.TableData)
                        {
                            <tr>
                                <td>@club.ClubName</td>
                                <td>@club.DepartmentName</td>
                                <td>@club.SubDepartmentName</td>
                                <td class="fw-bold text-@(club.IsActive ? "success" : "danger")">
                                    @(club.IsActive ? "Active" : "Inactive")
                                </td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>


@section scripts {
    <script>
        function toggleClubStatus(id, isChecked) {
            $.post('@Url.Action("ToggleClubStatus", "Director")',
                { id: id, isActive: isChecked },
                function (response) {
                    if (response.success) {
                        $("#status-" + id)
                            .text(isChecked ? "Active" : "Inactive")
                            .removeClass("text-success text-danger")
                            .addClass(isChecked ? "text-success" : "text-danger");
                    } else {
                        alert(response.message);
                    }
                });
        }
    </script>
}
